<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="ToConverter.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:ToConverter"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Loaded="Page_Loaded"
    SizeChanged="Page_SizeChanged">

    <Grid>

        <Grid.ColumnDefinitions>

            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>

        </Grid.ColumnDefinitions>

        <Grid.RowDefinitions>

            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>

        </Grid.RowDefinitions>

        <TitleBar Grid.Column="0"
                  Grid.ColumnSpan="3"
                  Grid.Row="0"
                  Height="32"
                  Title="ToConverter"/>

        <SelectorBar Grid.Column="0"
                     Grid.ColumnSpan="2"
                     Grid.Row="1"
                     HorizontalAlignment="Center"
                     x:Name="AppSelectorBar"
                     SelectionChanged="SelectorBar_SelectionChanged">

            <SelectorBar.Items>

                <SelectorBarItem Icon="Folder"
                                 IsSelected="True"
                                 x:Name="SelectFolderItem"
                                 Text="Folder"/>

                <SelectorBarItem x:Name="DragAndDropImagesItem"
                                 Text="Images">

                    <SelectorBarItem.Icon>

                        <FontIcon Glyph="&#xE8B9;" />

                    </SelectorBarItem.Icon>

                </SelectorBarItem>

            </SelectorBar.Items>

        </SelectorBar>

        <ScrollView Grid.Column="0"
                    Grid.ColumnSpan="3"
                    Grid.Row="2"
                    Grid.RowSpan="2">

            <Grid Background="{ThemeResource LayerOnMicaBaseAltFillColorDefaultBrush}">

                <StackPanel x:Name="SelectFolderStackPanel"
                            Padding="36"
                            VerticalAlignment="Center">

                    <TextBlock Grid.Row="0"
                               Margin="0,0,0,10"
                               Style="{StaticResource SubtitleTextBlockStyle}"
                               TextWrapping="Wrap">

                        <TextBlock.Inlines>

                            <Run x:Uid="Instructions1"/>
                            <LineBreak/>
                            <Run x:Uid="Instructions2"/>

                        </TextBlock.Inlines>

                    </TextBlock>

                    <CheckBox Grid.Row="1"
                              x:Name="IncludeSubFoldersCheckBox"
                              x:Uid="IncludeSubFolders"/>

                    <Button Click="ConvertFolderButton_Click"
                            Grid.Row="2"
                            Height="50"
                            HorizontalAlignment="Center"
                            x:Name="ConvertFolderButton">

                        <Button.Content>

                            <Grid>

                                <TextBlock x:Uid="ChooseFolderButton"
                                           VerticalAlignment="Center"/>

                                <ProgressRing IsActive="False"
                                              x:Name="LoadingRing"
                                              VerticalAlignment="Center"/>

                            </Grid>

                        </Button.Content>

                    </Button>

                </StackPanel>

                <Grid Grid.Row="1"
                      Margin="0,10,0,0"
                      x:Name="DragAndDropGrid"
                      Padding="36">

                    <Grid.RowDefinitions>

                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>

                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0"
                               Margin="0,0,0,10"
                               x:Uid="DragAndDropInstructions"/>

                    <Button Click="ConvertButton_Click"
                            Grid.Row="1"
                            IsEnabled="False"
                            Margin="0,0,0,10"
                            x:Name="ConvertButton">

                        <Button.Content>

                            <Grid>

                                <TextBlock x:Uid="ConvertButton"
                                           VerticalAlignment="Center"/>

                                <ProgressRing IsActive="False"
                                              x:Name="LoadingRing2"/>

                            </Grid>

                        </Button.Content>

                    </Button>

                    <Button Click="SaveImagesButton_Click"
                            Grid.Row="2"
                            IsEnabled="False"
                            Margin="0,0,0,10"
                            x:Name="SaveImagesButton"
                            x:Uid="SaveImagesButton"/>

                    <ItemsView AllowDrop="True"
                               Background="{ThemeResource AcrylicInAppFillColorBaseBrush}"
                               DragOver="PicturesView_DragOver"
                               Drop="PicturesView_Drop"
                               Grid.Row="3"
                               Height="400"
                               x:Name="PicturesView">

                        <ItemsView.ItemTemplate>

                            <DataTemplate x:DataType="local:ImageInfo">

                                <ItemContainer>

                                    <Grid CornerRadius="5"
                                          DataContext="{x:Bind}"
                                          Height="200"
                                          x:Name="AttachmentTemplateGrid"
                                          Padding="5"
                                          Width="200">

                                        <Grid.Background>

                                            <ImageBrush ImageSource="{x:Bind Source}"
                                                        Stretch="UniformToFill"/>

                                        </Grid.Background>

                                        <Grid.Children>

                                            <Button Background="Red"
                                                    Click="AtachmentDataTemplateRemoveButton_Click"
                                                    Content="&#xE738;"
                                                    FontFamily="Segoe Fluent Icons"
                                                    HorizontalAlignment="Right"
                                                    x:Name="AtachmentDataTemplateRemoveButton"
                                                    x:Uid="/StatusStrings/AttachmentTemplateRemoveButtonToolTip"
                                                    VerticalAlignment="Top">

                                                <Button.Resources>

                                                    <ResourceDictionary>

                                                        <ResourceDictionary.ThemeDictionaries>

                                                            <ResourceDictionary x:Key="Light">

                                                                <SolidColorBrush x:Key="ButtonBackgroundPointerOver"
                                                                                 Color="DarkRed"/>

                                                                <SolidColorBrush x:Key="ButtonBackgroundPressed"
                                                                                 Color="IndianRed"/>

                                                            </ResourceDictionary>

                                                            <ResourceDictionary x:Key="Default">

                                                                <SolidColorBrush x:Key="ButtonBackgroundPointerOver"
                                                                                 Color="DarkRed"/>

                                                                <SolidColorBrush x:Key="ButtonBackgroundPressed"
                                                                                 Color="IndianRed"/>

                                                            </ResourceDictionary>

                                                        </ResourceDictionary.ThemeDictionaries>

                                                    </ResourceDictionary>

                                                </Button.Resources>

                                            </Button>

                                        </Grid.Children>

                                    </Grid>

                                </ItemContainer>

                            </DataTemplate>

                        </ItemsView.ItemTemplate>

                        <ItemsView.Layout>

                            <UniformGridLayout />

                        </ItemsView.Layout>

                    </ItemsView>

                </Grid>

            </Grid>

        </ScrollView>

        <InfoBar Grid.Column="0"
                 Grid.ColumnSpan="3"
                 Grid.Row="3"
                 IsOpen="False"
                 Margin="5"
                 x:Name="AppInfoBar"
                 Severity="Success"/>

    </Grid>

</Page>
